var abi = [{"constant":true,"inputs":[],"name":"refund_on","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"party_one","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"party_two","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"DIVORCE_BID","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"is_witness","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"SEND_FUNDS_TO","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"acceptUnion","outputs":[],"payable":true,"type":"function"},{"constant":true,"inputs":[],"name":"isInitialized","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"refund","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"witness","type":"address"}],"name":"addWitness","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"askDivorce","outputs":[],"payable":true,"type":"function"},{"constant":true,"inputs":[],"name":"ACCEPT_BID","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"valid_until","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"isDivorced","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"isMarried","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"endInitialization","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"isValid","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"url_document","outputs":[{"name":"","type":"bytes32"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"required_signatures","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"inputs":[{"name":"first_party","type":"address"},{"name":"second_party","type":"address"},{"name":"url","type":"bytes32"},{"name":"days_before_refund","type":"uint256"},{"name":"agreement_duration_years","type":"uint256"}],"payable":false,"type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"witness","type":"address"}],"name":"WitnessAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"accepter","type":"address"}],"name":"Accepted","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"newState","type":"uint8"}],"name":"StateChanged","type":"event"}]

var bin = '606060405234156200001057600080fd5b60405160a080620013dd833981016040528080519060200190919080519060200190919080519060200190919080519060200190919080519060200190919050505b737726104068b4d19f416ea7d44a15d07ab1f8998073ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff1614151515620000a257600080fd5b737726104068b4d19f416ea7d44a15d07ab1f8998073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1614151515620000f257600080fd5b84600060016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555083600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508260028160001916905550620001c142620001a784620151806200020e64010000000002620010a3176401000000009004565b620002696401000000000262001015176401000000009004565b600381905550600260058190555060008060006101000a81548160ff02191690836003811115620001ee57fe5b02179055506301e13380810242016004819055505b5050505050620002a7565b60008082141562000223576000905062000263565b817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8115156200024f57fe5b048311156200025d57600080fd5b81830290505b92915050565b6000817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff038311156200029b57600080fd5b81830190505b92915050565b61112680620002b76000396000f30060606040523615610105576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806304b3e4961461010a578063071b944614610133578063123e39681461018857806316e3cd9c146101dd5780632354a1e3146102065780632a304cf1146102575780632dcaba9e146102ac578063392e53cd146102b6578063590e1ae3146102e357806359e26be1146102f85780635c2533dc14610331578063754c52e71461033b57806383f29fb6146103645780638f9443e11461038d578063a702314d146103ba578063b397657d146103e7578063bb5d40eb146103fc578063e88f99a314610429578063f65a27711461045a575b600080fd5b341561011557600080fd5b61011d610483565b6040518082815260200191505060405180910390f35b341561013e57600080fd5b610146610489565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561019357600080fd5b61019b6104af565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34156101e857600080fd5b6101f06104d5565b6040518082815260200191505060405180910390f35b341561021157600080fd5b61023d600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506104e1565b604051808215151515815260200191505060405180910390f35b341561026257600080fd5b61026a610501565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b6102b4610519565b005b34156102c157600080fd5b6102c96107b9565b604051808215151515815260200191505060405180910390f35b34156102ee57600080fd5b6102f66107e8565b005b341561030357600080fd5b61032f600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610a0e565b005b610339610d0a565b005b341561034657600080fd5b61034e610e20565b6040518082815260200191505060405180910390f35b341561036f57600080fd5b610377610e2c565b6040518082815260200191505060405180910390f35b341561039857600080fd5b6103a0610e32565b604051808215151515815260200191505060405180910390f35b34156103c557600080fd5b6103cd610e61565b604051808215151515815260200191505060405180910390f35b34156103f257600080fd5b6103fa610ea1565b005b341561040757600080fd5b61040f610f76565b604051808215151515815260200191505060405180910390f35b341561043457600080fd5b61043c610f83565b60405180826000191660001916815260200191505060405180910390f35b341561046557600080fd5b61046d610f89565b6040518082815260200191505060405180910390f35b60035481565b600060019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b67058d15e17628000081565b60066020528060005260406000206000915054906101000a900460ff1681565b737726104068b4d19f416ea7d44a15d07ab1f8998081565b67016345785d8a00003414151561052f57600080fd5b600060019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614806105d85750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b8061062c5750600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff165b151561063757600080fd5b61063f6107b9565b8015610650575061064e610e61565b155b151561065b57600080fd5b6106686005546001610f8f565b600581905550600780548060010182816106829190611052565b916000526020600020900160005b33909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550507f2e7bcc1a1a1c1bea0ff9a677c29b43662d6560afbebd99c213389fc15a6279d233604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a1600060055414156107b65761074a6002610faa565b737726104068b4d19f416ea7d44a15d07ab1f8998073ffffffffffffffffffffffffffffffffffffffff166108fc3073ffffffffffffffffffffffffffffffffffffffff16319081150290604051600060405180830381858888f1935050505015156107b557600080fd5b5b5b565b60008060038111156107c757fe5b6000809054906101000a900460ff1660038111156107e157fe5b1190505b90565b600042600354111515156107fb57600080fd5b6108036107b9565b80156108145750610812610e61565b155b151561081f57600080fd5b600060078054905011151561083357600080fd5b600060019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614806108dc5750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b806109305750600660003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff165b151561093b57600080fd5b600090505b6007805490508110156109de5760078181548110151561095c57fe5b906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc67016345785d8a00009081150290604051600060405180830381858888f1935050505015156109d057600080fd5b5b8080600101915050610940565b737726104068b4d19f416ea7d44a15d07ab1f8998073ffffffffffffffffffffffffffffffffffffffff16ff5b50565b737726104068b4d19f416ea7d44a15d07ab1f8998073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614151515610a5d57600080fd5b600060019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614151515610aba57600080fd5b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614151515610b1757600080fd5b600060019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161480610bc05750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b1515610bcb57600080fd5b600660008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16151515610c2457600080fd5b610c2c6107b9565b151515610c3857600080fd5b6001600660008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550610c9d6005546001611015565b6005819055507ff5944521c155e80db583372b9992336b6616b14dfb924a5cf6ef97b256d2803481604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a15b50565b600060019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161480610db35750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b1515610dbe57600080fd5b67058d15e17628000034141515610dd457600080fd5b610ddc610e61565b1515610de757600080fd5b610df16003610faa565b737726104068b4d19f416ea7d44a15d07ab1f8998073ffffffffffffffffffffffffffffffffffffffff16ff5b565b67016345785d8a000081565b60045481565b6000600380811115610e4057fe5b6000809054906101000a900460ff166003811115610e5a57fe5b1490505b90565b600060026003811115610e7057fe5b6000809054906101000a900460ff166003811115610e8a57fe5b148015610e9b5750610e9a610f76565b5b90505b90565b600060019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161480610f4a5750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b1515610f5557600080fd5b610f5d6107b9565b151515610f6957600080fd5b610f736001610faa565b5b565b6000600454421090505b90565b60025481565b60055481565b600081831015610f9e57600080fd5b81830390505b92915050565b806000806101000a81548160ff02191690836003811115610fc757fe5b02179055507f551dc40198cc79684bb69e4931dba4ac16e4598792ee1c0a5000aeea366d7bb68160405180826003811115610ffe57fe5b60ff16815260200191505060405180910390a15b50565b6000817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0383111561104657600080fd5b81830190505b92915050565b81548183558181151161107957818360005260206000209182019101611078919061107e565b5b505050565b6110a091905b8082111561109c576000816000905550600101611084565b5090565b90565b6000808214156110b657600090506110f4565b817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8115156110e157fe5b048311156110ee57600080fd5b81830290505b929150505600a165627a7a723058202ec049170fb86d05cdcf0b16944b1cb5c87b52824146fcbc6046aa18e2faba010029'

var gas = 3000000

// TODO: should be deprecated soon

window.addEventListener('load', function() {
  $('.modal').modal()

  // Checking if Web3 has been injected by the browser (Mist/MetaMask)
  if (typeof web3 !== 'undefined') {
    // Use Mist/MetaMask's provider
    window.web3 = new Web3(web3.currentProvider)

    // Check network
    web3.version.getNetwork((err, netId) => {
      switch (netId) {
        case "1":
          break
        default:
          Materialize.toast('We detected you are not using the main network, please switch to the main one if you want to do "real" agreements, test networks are only for testing.', 3000)
      }
    })

  } else {
    $('#error_web3').modal('open')
  }
})
